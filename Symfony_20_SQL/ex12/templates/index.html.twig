{% extends 'base.html.twig' %}

{% block content %}

	{% for type, messages in app.flashes %}
		{% for message in messages %}
			<div style="padding: 10px; margin-bottom: 10px; border: 1px solid {{ type == 'success' ? 'green' : 'red' }}; color: {{ type == 'success' ? 'green' : 'red' }};">
				{{ message }}
			</div>
		{% endfor %}
	{% endfor %}

	<h3>Add a new person</h3>

	{{ form_start(form) }}
		{{ form_widget(form) }}
	{{ form_end(form) }}

	<hr>

		<h3>List</h3>
		<table border="1" style="width: 100%; border-collapse: collapse;">
			<thead>
				<tr>
					<th>ID</th>
					<th>Username</th>
					<th>Name</th>
					<th>Email</th>
                    <th>Phone</th>
					<th>Enable</th>
					<th>Addresses</th>
					<th>Actions</th>
				</tr>
			</thead>

			<tbody>
				{% for person in persons %}
					<tr>
						<td>{{ person.id }}</td>
						<td>{{ person.username }}</td>
						<td>{{ person.name }}</td>
						<td>{{ person.email }}</td>
                        <td>{{ person.phone }}</td>
						<td>{{ person.enable ? 'Yes' : 'No' }}</td>
						<td>
							{% if person.address %}
								{{ person.address.street }}, {{ person.address.city }} ({{ person.address.zipcode }})
							{% else %}
								<em>No address</em>
							{% endif %}
						</td>
							<a href="{{ path('e12_update', {'id': person.id}) }}" style="text-decoration: none;">
                                <button type="button" style="cursor: pointer;">Edit</button>
                            </a>

							<form method="post" action="{{ path('e12_delete', {'id': person.id}) }}" onsubmit="return confirm('Are you sure you want to delete this person?');">
								<button type="submit" style="background-color: #ffcccc; border: 1px solid red; cursor: pointer;">Delete</button>
							</form>
						
						</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="8">No one in the database</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</hr>

{% endblock %}