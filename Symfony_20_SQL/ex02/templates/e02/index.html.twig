{% extends 'e02/base.html.twig' %}

{% block body %}

    <h1>Exercice 02 : SQL and form</h1>

    {# --- PARTIE 1 : LE FORMULAIRE SYMFONY --- #}
    <div style="margin-bottom: 30px; border: 1px solid #ccc; padding: 20px;">
        <h3>Add a person</h3>
        
        {# C'est cette ligne magique qui affiche tous tes champs (add) et ton bouton #}
        {{ form(form) }}
    </div>

    {# --- PARTIE 2 : LE TABLEAU DES RÉSULTATS --- #}
    <div>
        <h3>Subscribers (Database)</h3>
        
        <table border="1" style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Username</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Date of birth</th>
                    <th>Address</th>
                </tr>
            </thead>
            <tbody>
                {# On boucle sur la variable 'persons' envoyée par le contrôleur #}
                {% for person in persons %}
                    <tr>
                        <td>{{ person.id }}</td>
                        <td>{{ person.username }}</td>
                        <td>{{ person.name }}</td>
                        <td>{{ person.email }}</td>
                        <td>{{ person.birthdate }}</td>
                        <td>{{ person.address }}</td>
                    </tr>
                {# Si la liste est vide, on affiche un message #}
                {% else %}
                    <tr>
                        <td colspan="6">No one has been found in the table.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock %}