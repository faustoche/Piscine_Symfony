{% extends 'ex01/base.html.twig' %}

{% block title %}Admin{% endblock %}

{% block body %}
    <div class="post">
        <div class="post-title">User admin</div>

        {% for message in app.flashes('error') %}
            <div class="alert">{{ message }}</div>
        {% endfor %}
        {% for message in app.flashes('success') %}
            <div class="alert" style="border-color: green; color: green; background: #030;">{{ message }}</div>
        {% endfor %}

        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Username</th>
                    <th>Roles</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                    <tr>
                        <td>{{ user.id }}</td>
                        <td style="font-weight: bold; color: yellow;">{{ user.username }}</td>
                        <td>
                            {% for role in user.roles %}
                                <span style="background: #333; padding: 2px;">{{ role }}</span>
                            {% endfor %}
                        </td>
                        <td>
                            {% if user != app.user %}
                                <a href="{{ path('app_admin_delete_user', {'id': user.id}) }}" 
                                   class="btn" 
                                   style="background-color: #dc3545; font-size: 0.8em; padding: 5px;"
                                   onclick="return confirm('Are you sure?')">
                                   Delete
                                </a>
                            {% else %}
                                <span style="color: #ccc;">(You)</span>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <div style="text-align: center; margin-top: 20px;">
            <a href="{{ path('app_homepage') }}">Back to Homepage</a>
        </div>
    </div>
{% endblock %}